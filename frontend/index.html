<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sensor Data Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="res/faviconB.ico">
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>

    <!-- Include Firebase Database -->
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>

    <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
        apiKey: "AIzaSyDzPbbmREViwPxZvGJ0GVHo6Vd-0EIeHto",
        authDomain: "smart-prusy.firebaseapp.com",
        databaseURL: "https://smart-prusy-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "smart-prusy",
        storageBucket: "smart-prusy.appspot.com",
        messagingSenderId: "69013815084",
        appId: "1:69013815084:web:679ac5c408513b2dd8b689"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    </script>

</head>
<body>
    <header>
        <div class="header-content">
            <img src="res/logoPWrGray.png" alt="WUST Logo" class="header-logo">
            <h1>Welcome to Smart Prusy</h1>
        </div>
    </header>
    <h2>Last updated data:</h2>
        <div class="data-container">
        <div id="data-inside">
            <h3>Data inside campus</h3>
            <p>Time: <span id="now-time-inside">Loading...</span></p>
            <p>Temperature: <span id="temperature-inside">Loading...</span>°C</p>
            <p>Humidity: <span id="humidity-inside">Loading...</span>%</p>
            <p>Pressure: <span id="pressure-inside">Loading...</span> hPa</p>
        </div>
        <div id="data-outside">
            <h3>Data outside campus</h3>
            <p>Time: <span id="now-time-outside">Loading...</span></p>
            <p>Temperature: <span id="temperature-outside">Loading...</span>°C</p>
            <p>Humidity: <span id="humidity-outside">Loading...</span>%</p>
            <p>Pressure: <span id="pressure-outside">Loading...</span> hPa</p>
        </div>
    </div>
    <p><strong>Smart Prusy</strong> is an student-led project at Wroclaw University of Science and Technology. Our mission is to deliver precise, real-time environmental data, empowering our community to better understand the atmospheric conditions both inside and outside the campus located on Prusy Street.</p>
    
    <h2>What We Offer</h2>
    <p>Our project harnesses cutting-edge technology to monitor and report on three key environmental factors:</p>
    <ul>
        <li><strong>Temperature:</strong> Stay updated with accurate temperature readings that help predict daily weather conditions and ensure comfortable indoor environments.</li>
        <li><strong>Pressure:</strong> Our sensitive instruments detect subtle changes in atmospheric pressure, providing you with crucial information that can predict weather changes.</li>
        <li><strong>Humidity:</strong> Understanding humidity levels is essential for both health and comfort. Our system offers precise measurements that inform you about the air quality and help in planning your day.</li>
    </ul>

    <h2>Purpose & Vision</h2>
    <p>Smart Prusy aims to make environmental data accessible and understandable, promoting a deeper awareness of our immediate surroundings. Whether you're planning your attire for the day or researching for academic purposes, our real-time data is a reliable source for students, faculty, and visitors alike.</p>
    
    <p>Join us in leveraging this powerful information to enhance your daily life and academic activities on campus. With Smart Prusy, you're always informed about the weather and environmental conditions where it matters most.</p>

    <div class="control-row">
        <div>
            <h3>Select Location:</h3>
            <select id="location" onchange="fetchData()">
                <option value="inside">Inside Campus</option>
                <option value="outside">Outside Campus</option>
            </select>
        </div>
        <div>
            <h3>Select Data Mode:</h3>
            <select id="dataMode" onchange="fetchData()">
                <option value="real">Real Measurements</option>
                <option value="hourly">Average for Each Hour</option>
                <option value="daily">Average for Each Day</option>
                <option value="monthly">Average for Each Month</option>
            </select>
        </div>
        <div>
            <h3>Sort Data By:</h3>
            <select id="sortCriteria" onchange="setSortCriteria(this.value)">
                <option value="date">Date</option>
                <option value="temperature">Temperature</option>
                <option value="humidity">Humidity</option>
                <option value="pressure">Pressure</option>
            </select>
        </div>
    </div>
    
    <button id="scrollToEndBtn" onclick="scrollToEndOfTable()">Scroll to End of Table</button>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
     <table id="history">
         <thead>
            <tr>
                <th id="date-header">Date</th>
                <th id="temperature-header">Temperature (°C)</th>
                <th id="humidity-header">Humidity (%)</th>
                <th id="pressure-header">Pressure (hPa)</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data rows will be inserted here dynamically -->
        </tbody>
    </table>
    
    <h2>Graphical Representation of Data:</h2>
    <div class="control-row">
        <div>
            <h3>Select Location:</h3>
            <select id="location" onchange="fetchData()">
                <option value="inside">Inside Campus</option>
                <option value="outside">Outside Campus</option>
            </select>
        </div>
        <div>
            <h3>Select Data Mode:</h3>
            <select id="dataMode" onchange="fetchData()">
                <option value="real">Real Measurements</option>
                <option value="hourly">Average for Each Hour</option>
                <option value="daily">Average for Each Day</option>
                <option value="monthly">Average for Each Month</option>
            </select>
        </div>
        <div>
            <h3>Sort Data By:</h3>
            <select id="sortCriteria" onchange="setSortCriteria(this.value)">
                <option value="date">Date</option>
                <option value="temperature">Temperature</option>
                <option value="humidity">Humidity</option>
                <option value="pressure">Pressure</option>
            </select>
        </div>
    </div>
    <div class="chart-container" id="endTable">
        <canvas id="temperatureChart" width="400" height="200"></canvas>
        <canvas id="humidityChart" width="400" height="200"></canvas>
        <canvas id="pressureChart" width="400" height="200"></canvas>
    </div>
    <footer>
        <p>&copy; 2024 <a href="https://github.com/DieMon-dev">DieMon-dev</a>. All rights reserved.</p>
    </footer>
    <button id="scrollToTopBtn" onclick="scrollToTop()">&#8679;</button>
    <button id="scrollToEndBtnFixed" onclick="scrollToEndOfTable()">&#8681;</button>
    <script src="script.js"></script>
    <script src="script.js"></script>
</body>
</html>
